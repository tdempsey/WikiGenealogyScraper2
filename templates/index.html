{% extends "layout.html" %}

{% block title %} - Home{% endblock %}

{% block content %}
<div class="row align-items-center">
    <div class="col-lg-6">
        <h1 class="display-4 fw-bold mb-4">Explore Family History Through Wikidata</h1>
        <p class="lead mb-4">
            Discover genealogical connections of historical figures, celebrities, and notable people 
            using data from Wikidata - the free and collaborative knowledge base.
        </p>
        <div class="d-grid gap-2 d-md-flex justify-content-md-start">
            <a href="/search" class="btn btn-primary btn-lg px-4 me-md-2">
                <i class="fas fa-search me-2"></i>Search Now
            </a>
            <a href="https://www.wikidata.org/wiki/Wikidata:Main_Page" target="_blank" class="btn btn-outline-secondary btn-lg px-4">
                Learn More
            </a>
        </div>
    </div>
    <div class="col-lg-6 mt-5 mt-lg-0">
        <!-- Using SVG for visualization example -->
        <svg id="home-visualization" width="100%" height="350" class="visualization-placeholder"></svg>
    </div>
</div>

<div class="row my-5">
    <div class="col-12">
        <h2 class="text-center mb-4">How It Works</h2>
    </div>
    <div class="col-md-4 mb-4">
        <div class="card h-100 border-0 shadow-sm">
            <div class="card-body text-center">
                <i class="fas fa-search fa-3x text-primary mb-3"></i>
                <h3 class="card-title">Search</h3>
                <p class="card-text">
                    Search for notable individuals from across history, from monarchs and presidents to 
                    artists, scientists, and celebrities.
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-4">
        <div class="card h-100 border-0 shadow-sm">
            <div class="card-body text-center">
                <i class="fas fa-sitemap fa-3x text-primary mb-3"></i>
                <h3 class="card-title">Explore</h3>
                <p class="card-text">
                    View family trees and relationships including parents, children, 
                    siblings, and spouses through an interactive visualization.
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-4">
        <div class="card h-100 border-0 shadow-sm">
            <div class="card-body text-center">
                <i class="fas fa-user-friends fa-3x text-primary mb-3"></i>
                <h3 class="card-title">Discover</h3>
                <p class="card-text">
                    Uncover surprising family connections and learn more about the 
                    lives of historical and contemporary figures.
                </p>
            </div>
        </div>
    </div>
</div>

<div class="row my-5">
    <div class="col-12">
        <div class="card border-0 bg-light">
            <div class="card-body p-4">
                <h3>Try these examples:</h3>
                <div class="row">
                    <div class="col-md-4 mb-2">
                        <a href="/search?query=Elizabeth II" class="btn btn-outline-secondary w-100">Queen Elizabeth II</a>
                    </div>
                    <div class="col-md-4 mb-2">
                        <a href="/search?query=Albert Einstein" class="btn btn-outline-secondary w-100">Albert Einstein</a>
                    </div>
                    <div class="col-md-4 mb-2">
                        <a href="/search?query=Barack Obama" class="btn btn-outline-secondary w-100">Barack Obama</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Simple D3.js visualization for the home page
    document.addEventListener('DOMContentLoaded', function() {
        const svg = d3.select('#home-visualization');
        const width = svg.node().getBoundingClientRect().width;
        const height = 350;
        
        // Define some sample family data
        const nodes = [
            { id: "center", name: "Center Person", x: width/2, y: height/2, radius: 30, color: "#3498DB" },
            { id: "parent1", name: "Parent 1", x: width/2 - 100, y: height/2 - 100, radius: 20, color: "#2C3E50" },
            { id: "parent2", name: "Parent 2", x: width/2 + 100, y: height/2 - 100, radius: 20, color: "#2C3E50" },
            { id: "child1", name: "Child 1", x: width/2 - 80, y: height/2 + 100, radius: 15, color: "#34495E" },
            { id: "child2", name: "Child 2", x: width/2, y: height/2 + 100, radius: 15, color: "#34495E" },
            { id: "child3", name: "Child 3", x: width/2 + 80, y: height/2 + 100, radius: 15, color: "#34495E" },
            { id: "sibling", name: "Sibling", x: width/2 - 150, y: height/2, radius: 20, color: "#34495E" },
            { id: "spouse", name: "Spouse", x: width/2 + 150, y: height/2, radius: 20, color: "#34495E" }
        ];
        
        const links = [
            { source: "parent1", target: "center", type: "parent" },
            { source: "parent2", target: "center", type: "parent" },
            { source: "center", target: "child1", type: "parent" },
            { source: "center", target: "child2", type: "parent" },
            { source: "center", target: "child3", type: "parent" },
            { source: "center", target: "sibling", type: "sibling" },
            { source: "center", target: "spouse", type: "spouse" }
        ];
        
        // Define link colors by type
        const linkColors = {
            parent: "#2C3E50",
            sibling: "#34495E",
            spouse: "#3498DB"
        };
        
        // Draw links
        svg.selectAll('line')
            .data(links)
            .enter()
            .append('line')
            .attr('x1', d => {
                const source = nodes.find(n => n.id === d.source);
                return source.x;
            })
            .attr('y1', d => {
                const source = nodes.find(n => n.id === d.source);
                return source.y;
            })
            .attr('x2', d => {
                const target = nodes.find(n => n.id === d.target);
                return target.x;
            })
            .attr('y2', d => {
                const target = nodes.find(n => n.id === d.target);
                return target.y;
            })
            .attr('stroke', d => linkColors[d.type])
            .attr('stroke-width', 2)
            .attr('stroke-dasharray', d => d.type === 'spouse' ? '5,5' : 'none');
        
        // Draw nodes
        const nodeElements = svg.selectAll('circle')
            .data(nodes)
            .enter()
            .append('circle')
            .attr('cx', d => d.x)
            .attr('cy', d => d.y)
            .attr('r', d => d.radius)
            .attr('fill', d => d.color);
            
        // Add labels
        svg.selectAll('text')
            .data(nodes)
            .enter()
            .append('text')
            .attr('x', d => d.x)
            .attr('y', d => d.y + d.radius + 15)
            .attr('text-anchor', 'middle')
            .attr('fill', '#2C3E50')
            .style('font-size', '12px')
            .style('font-family', "'Source Sans Pro', sans-serif")
            .text(d => d.name);
            
        // Add a legend
        const legend = svg.append('g')
            .attr('transform', 'translate(20, 20)');
            
        const legendItems = [
            { type: "Parent", color: linkColors.parent, dash: "none" },
            { type: "Sibling", color: linkColors.sibling, dash: "none" },
            { type: "Spouse", color: linkColors.spouse, dash: "5,5" }
        ];
        
        legendItems.forEach((item, i) => {
            const g = legend.append('g')
                .attr('transform', `translate(0, ${i * 25})`);
                
            g.append('line')
                .attr('x1', 0)
                .attr('y1', 0)
                .attr('x2', 30)
                .attr('y2', 0)
                .attr('stroke', item.color)
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', item.dash);
                
            g.append('text')
                .attr('x', 40)
                .attr('y', 5)
                .style('font-size', '12px')
                .style('font-family', "'Source Sans Pro', sans-serif")
                .text(item.type);
        });
    });
</script>
{% endblock %}
